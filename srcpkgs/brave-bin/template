# Template file for 'brave-bin'
pkgname=brave-bin
version=1.85.118
revision=1
archs="x86_64 aarch64"
depends="alsa-lib gtk+3 libXScrnSaver nss"
short_desc="Brave Browser for linux"
maintainer="torifork <jonass.main@proton.me>"
license="MPL-2.0"
homepage="https://github.com/brave/brave-browser"
nostrip="yes"

case "$XBPS_TARGET_MACHINE" in
x86_64)
	distfiles="https://github.com/brave/brave-browser/releases/download/v${version}/brave-browser-${version}-linux-amd64.zip"
	checksum="1cb84cbf5693925152c8d48a4ebc9a5a6ff9bd945662a4806cf8a5a2766c2336"
	;;
aarch64)
	distfiles="https://github.com/brave/brave-browser/releases/download/v${version}/brave-browser-${version}-linux-arm64.zip"
	checksum="ba590b2547fe3278cf3b33f8b0e056a15df23a9446c34d66d8b1b0cc6a9a8c6b"
	;;
esac

do_install() {
	local pkgname=brave

	chmod 4755 chrome-sandbox
	vmkdir usr/lib/brave
	vcopy * usr/lib/brave

	vmkdir usr/bin
	ln -sf /usr/lib/brave/brave-browser ${DESTDIR}/usr/bin/brave

	for i in 16x16 24x24 32x32 48x48 64x64 128x128 256x256; do
		vinstall product_logo_${i%x*}.png 644 usr/share/icons/hicolor/${i}/apps brave.png
	done

	vinstall ${FILESDIR}/brave-browser.desktop 644 usr/share/applications
}
