# Template file for 'helium-bin'
pkgname=helium-bin
version=0.7.7.1
revision=1
archs="x86_64 aarch64"
short_desc="Private, fast, and honest web browser"
maintainer="torifork <jonass.main@proton.me>"
license="GPL-3.0-only AND BSD-3-Clause"
homepage="https://github.com/imputnet/helium-linux"

case "$XBPS_TARGET_MACHINE" in
x86_64)
	distfiles="
	https://github.com/imputnet/helium-linux/releases/download/${version}/helium-${version}-x86_64_linux.tar.xz
	https://raw.githubusercontent.com/imputnet/helium-linux/${version}/LICENSE.ungoogled_chromium>LICENSE.txt
	"
	checksum="
	698f46c080cf4dcb249b9e4d96e4b2c640870ba76b77a05d05a358661af39511
	9539b394e4179952698894bd62ef6566b6804ab0ff360dcf3a511cfaf7f78c4d
	"
	;;
aarch64)
	distfiles="
	https://github.com/imputnet/helium-linux/releases/download/${version}/helium-${version}-arm64_linux.tar.xz
	https://raw.githubusercontent.com/imputnet/helium-linux/${version}/LICENSE.ungoogled_chromium>LICENSE.txt
	"
	checksum="
	efa849d7dfdb1f3744d7ffe478617d8a66243073b2e951e9039e9bc44920c200
	9539b394e4179952698894bd62ef6566b6804ab0ff360dcf3a511cfaf7f78c4d
	"
	;;
esac

post_extract() {
	mv helium-${version}-*_linux/* ./
	rmdir helium-${version}-*_linux
}

do_install() {
	local pkgname=helium

	vmkdir usr/lib/helium
	vcopy * usr/lib/helium

	vmkdir usr/bin
	ln -sf /usr/lib/helium/chrome ${DESTDIR}/usr/bin/helium

	vinstall helium.desktop 644 usr/share/applications

	vinstall product_logo_256.png 644 usr/share/icons/hicolor/256x256/apps helium.png

	vlicense LICENSE.txt LICENSE.ungoogled_chromium
}
